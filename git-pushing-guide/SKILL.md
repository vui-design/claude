----
name: git-pushing-guide  
description: 该技能用于使用约定式提交信息，暂存、提交并推送资源更改。当用户想要提交和推送更改、提及推送到远程仓库，或要求保存和推送他们的工作时使用。当用户说"推送到github"、"推送更改"、"提交并推送"、"提交代码"或类似的git工作流请求时也会激活。
----

# Git提交规范指南

暂存所有资源更改，创建一条约定式提交信息，并推送到远程分支。请务必遵循以下规范，保持项目提交历史清晰、规范、易追溯！

## 一、使用时机

当和用户出现以下对话情况时自动激活：
- 用户明确要求推送更改（如提到"推送到github"、"推送更改"、"提交并推送"、"提交代码"等之类语句）
- 用户提及将工作保存到远程（如提到"保存到github"、"推送到远程"等之类语句）
- 用户说出诸如"让我们把这个推上去"或"提交这些更改"等之类的短语
- 用户完成一个功能并希望共享它

## 二、提交类型

| 类型 | 使用场景 | 示例 | 说明 |
|------|------|------|------|
| [init] | 项目初始化 | [init]项目基础结构搭建 | 用于初始提交 |
| [config] | 配置修改 | [config]更新数据库链接配置 | 用于配置文件提交 |
| [feat] | 新增功能 | [feat]新增资产批量导入功能 | 用于所有新功能开发 |
| [update] | 更新优化 | [update]优化用户登录流程处理 | 用于对现有功能进行更新优化 |
| [fix] | 修复BUG | [fix]解决token过期问题；修复订单金额计算错误问题 | 用于代码BUG修复 |
| [hotfix] | 紧急修复 | [hotfix]紧急修复支付安全漏洞 | 用于生产环境紧急BUG修复 |
| [assets] | 资源文件 | [assets]添加项目Logo图片 | 用于静态资源文件操作 |
| [docs] | 文档变更、注释 | [docs]更新API接口文档；完善代码注释说明 | 不涉及现有功能修改 |
| [style] | 代码格式调整 | [style]统一代码缩进格式 | 不影响现有功能 |
| [perf] | 性能优化 | [perf]优化大文件上传速度 | 专门用于性能改进 |
| [test] | 测试相关 | [test]添加资产导入单元测试 | 添加或修改测试代码 |
| [refactor] | 重构 | [refactor]重构用户服务模块 | 不新增功能也不是修复BUG |
| [revert] | 回滚 | [revert]恢复被屏蔽的验证逻辑 | 撤销之前的提交 |
| [build] | 构建系统或外部依赖变更 | [build]升级Vue版本到3.4 | 影响构建系统或外部依赖 |
| [ci] | CI配置文件和脚本变更 | [ci]添加自动化部署脚本 | 添加或修改CI/CD配置文件 |
| [chore] | 杂项任务 | [chore]更新项目依赖 | 不修改源码的日常维护 |

## 三、提交格式

```
[类型]简短描述（中文）

[可选]详细描述（中文）
- 说明为什么做这个变更
- 变更的影响范围

[可选]相关链接（如关联的Issue编号）
- Issue: #123
```

## 四、提交规范

### 1、简短描述（必需）
- **使用中文**，简洁明了
- **使用祈使语气**（如“新增”，而非“新增了”）
- **首字母大写**（如果是英文单词）
- **结尾不加句号**
- **整体不超过100个中文字符**

### 2、详细描述（可选）
- 与简短描述之间**空一行**
- 使用**中文**详细说明
- 说明**为什么**做这个变更
- 说明变更的**影响范围**
- 可使用**列表**格式

### 3、关联信息（可选）
- 关联Issue编号：`Issue: #123`
- 关联PR编号：`PR: #456`
- 破坏性变更：`BREAKING CHANGE: 说明`

## 五、提交示例

### 示例1：简单的新功能
```
[feat]新增资产批量下载功能
```

### 示例2：带详细描述的功能更新
```
[update]优化资产搜索性能

- 添加Elasticsearch索引
- 实现搜索结果缓存
- 搜索响应时间从3s降至200ms

Issue: #45
```

### 示例3：BUG修复
```
[fix]修复大文件上传失败问题

- 实现分块上传机制
- 添加断点续传功能
- 增加上传进度显示

Issue: #89
```

### 示例4：文档更新
```
[docs]更新资产上传接口文档

- 添加请求参数说明
- 添加响应示例
- 添加错误码说明
```

### 示例5：代码重构
```
[refactor]重构资产预览组件

- 将预览逻辑从组件中抽离
- 使用Composition API重写
- 提高代码可维护性

不影响现有功能，纯代码结构优化
```

## 六、常见错误

### ❌ 错误示例

```
修复了一个bug
添加新功能
update
fix bug
优化代码
```

### ✅ 正确示例

```
[feat]新增资产标签功能
[update]优化用户登录流程处理
[fix]修复订单金额计算错误问题
[hotfix]紧急修复用户登录失败问题
[refactor]重构数据查询逻辑
```

之后每次 `git commit` 时会自动加载模板。

## 七、提交频率

- **小步提交**：完成一个小功能点就提交，不要积累太多变更
- **原子提交**：每次提交只做一件事，便于回滚和追踪
- **及时提交**：不要等待过长时间才提交，避免代码丢失

## 八、提交前检查清单

- [ ] 代码已经过测试
- [ ] 没有遗留的 `console.log` 或调试代码
- [ ] 代码符合项目规范
- [ ] 提交信息清晰明了
- [ ] 已移除不必要的文件

## 九、设置Git提交信息模板

在项目根目录执行以下命令：

```bash
git config commit.template .gitmessage
```

## 十、分支管理规范

### 1、分支命名

- `main` / `master`: 主分支（生产环境）
- `release/版本号`: 发布分支，如 `release/v1.0.0`
- `develop`: 开发分支
- `feature/<用户名>/<功能名>-<日期>`: 功能分支，如 `feature/zhangsan/asset-upload-20260110`
- `fix/<用户名>/<BUG描述>-<日期>`: 修复分支，如 `fix/zhangsan/login-error-20260110`
- `hotfix/<用户名>/<紧急修复>-<日期>`: 紧急修复分支，如 `hotfix/zhangsan/urgent-fix-20260110`

**补充说明**：分支名中包含用户名便于识别分支所有者、避免命名冲突、方便清理过期分支

### 2、分支工作流程

1. 从 `develop` 创建 `feature` 分支开发新功能
2. 开发完成后合并至 `develop` 分支
3. 测试通过后从 `develop` 创建 `release` 分支
4. 发布后合并至 `main` / `master` 分支并打上tag标签

### 3、版本标签（Tag标签）

发布新版本时打标签：

```bash
git tag -a v1.0.0 -m "发布 v1.0.0 版本"
git push origin v1.0.0
```

版本号格式：`v主版本号.次版本号.修订号`

- 主版本号：不兼容的API变更
- 次版本号：向下兼容的功能新增
- 修订号：向下兼容的BUG修复